<div class="container pt-5">
  <app-loader *ngIf="loading"></app-loader>
  <div class="row">
    <div class="col md-8 col-lg-6">
      <h1 class="font-weight-light mb-5">Profile</h1>

      <form class="login-form" (ngSubmit)="onSubmit()">
        <div class="mb-3">
          <label class="form-label">Full name</label>
          <input
            type="text"
            class="form-control"
            id="name"
            required
            [(ngModel)]="user.name"
            [ngModelOptions]="{ standalone: true }"
          />
        </div>

        <div class="row mb-3">
          <div class="col">
            <div>
              <label class="form-label">Age</label>
              <input
                type="number"
                class="form-control"
                id="name"
                required
                [(ngModel)]="user.age"
                [ngModelOptions]="{ standalone: true }"
              />
            </div>
          </div>
          <div class="col">
            <div>
              <label class="form-label">Gender</label>
              <select
                class="form-select"
                [(ngModel)]="user.gender"
                [ngModelOptions]="{ standalone: true }"
              >
                <option value="female">Female</option>
                <option value="male">Male</option>
              </select>
            </div>
          </div>
        </div>

        <div class="mb-4">
          <label class="form-label">Address</label>
          <textarea
            class="form-control"
            required
            [(ngModel)]="user.address"
            [ngModelOptions]="{ standalone: true }"
          ></textarea>
        </div>

        <div *ngIf="success" class="alert alert-success">
          Changes saved successfully!
        </div>
        <div *ngIf="error" class="alert alert-danger">{{ error }}</div>
        <button type="submit" class="btn btn-primary">Save</button>
      </form>

      <div class="my-5">
        <p *ngIf="isAccountDeleted" class="alert alert-success">Account was deleted. Redirecting to login...</p>
        <button class="btn btn-outline-danger" (click)="openModal(content)">Delete Account</button>
      </div>
    </div>
  </div>
</div>

<!-- delete confirm modal -->
<ng-template #content let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Delete Account</h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    ></button>
  </div>
  <div class="modal-body">
    <p>
      This will delete your account long with all your appointments. This action is irreversible. Are you
      sure?
    </p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="modal.dismiss()">
      Keep Account
    </button>
    <button
      type="button"
      class="btn btn-outline-dark"
      (click)="modal.close()"
    >
      Delete
    </button>
  </div>
</ng-template>
